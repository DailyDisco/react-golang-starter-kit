# ============================================
# React + Go Starter Kit - Production Environment Template
# ============================================
# USAGE: Copy this file to .env.prod and fill in your values
#   cp .env.prod.example .env.prod
#
# WARNING: Never commit .env.prod to version control!
# Use your deployment platform's secrets management for sensitive values.

# ============================================
# 1. CORE APPLICATION SETTINGS
# ============================================

# Server port for the Go backend
API_PORT=8080

# Backend API URL (replace with your production URL)
VITE_API_URL=https://api.yourdomain.com

# Environment mode
GO_ENV=production
NODE_ENV=production

# Disable debug mode in production
DEBUG=false

# ============================================
# 2. DATABASE CONFIGURATION
# ============================================

# PostgreSQL connection settings
# Use environment variables or secrets manager for sensitive values
DB_HOST=${DB_HOST}
DB_PORT=5432
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_NAME=${DB_NAME}

# Always use SSL in production
DB_SSLMODE=require

# ============================================
# 3. AUTHENTICATION & SECURITY
# ============================================

# JWT secret key - GENERATE A NEW ONE FOR PRODUCTION!
# Run: openssl rand -hex 32
JWT_SECRET=your-jwt-secret-here-generate-with-openssl-rand-hex-32

# JWT token expiration (hours)
JWT_EXPIRATION_HOURS=24

# Cookie SameSite mode - use strict in production for CSRF protection
COOKIE_SAMESITE=strict

# ============================================
# 4. CORS CONFIGURATION
# ============================================

# Production frontend URLs (comma-separated)
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================
# 5. RATE LIMITING
# ============================================

# Enable rate limiting in production
RATE_LIMIT_ENABLED=true

# General API rate limiting (higher limits for production)
RATE_LIMIT_GENERAL_REQUESTS=1000
RATE_LIMIT_GENERAL_WINDOW=1h

# Authentication rate limiting (stricter to prevent brute force)
RATE_LIMIT_AUTH_REQUESTS=10
RATE_LIMIT_AUTH_WINDOW=15m

# Public endpoint rate limiting
RATE_LIMIT_PUBLIC_REQUESTS=5000
RATE_LIMIT_PUBLIC_WINDOW=1h

# ============================================
# 6. LOGGING CONFIGURATION
# ============================================

# Core logging settings
LOG_ENABLED=true
LOG_LEVEL=info
LOG_PRETTY=false

# User context for debugging (include user ID in logs)
LOG_INCLUDE_USER_CONTEXT=true

# Do not log request/response bodies in production (security)
LOG_INCLUDE_REQUEST_BODY=false
LOG_INCLUDE_RESPONSE_BODY=false

# Size limits (bytes)
LOG_MAX_REQUEST_BODY_SIZE=1024
LOG_MAX_RESPONSE_BODY_SIZE=1024

# Performance: sample 10% of requests for high-traffic apps
LOG_SAMPLING_RATE=0.1

# Async logging for better performance
LOG_ASYNC=true

# Security: sanitize sensitive data
LOG_SANITIZE_HEADERS=true
LOG_FILTER_SENSITIVE_DATA=true
LOG_ALLOWED_HEADERS=accept,content-type,user-agent,x-request-id,x-forwarded-for

# ISO 8601 timestamp format
LOG_TIME_FORMAT=2006-01-02T15:04:05Z07:00

# ============================================
# 7. CACHING CONFIGURATION
# ============================================

# Enable caching for production performance
CACHE_ENABLED=true

# Use Redis in production (recommended)
CACHE_TYPE=redis

# Redis connection
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0

# Redis is required for production
REDIS_REQUIRED=true

# Redis pool settings for production
REDIS_POOL_SIZE=20
REDIS_MIN_IDLE_CONNS=5
REDIS_MAX_IDLE_CONNS=10

# Cache TTL settings (seconds)
CACHE_DEFAULT_TTL=300
CACHE_USER_PROFILE_TTL=120
CACHE_SESSION_TTL=900

# Cache key prefix
CACHE_KEY_PREFIX=prod

# ============================================
# 8. FILE STORAGE (AWS S3)
# ============================================

# AWS S3 configuration (use secrets manager)
# AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
# AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-production-bucket

# ============================================
# 9. EXTERNAL SERVICES (Configure as needed)
# ============================================

# --- Email / SMTP ---
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=${SMTP_PASSWORD}
# SMTP_FROM=noreply@yourdomain.com

# --- Payment Processing ---
# Use live keys in production (sk_live_, pk_live_)
# STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
# STRIPE_PUBLISHABLE_KEY=pk_live_your-publishable-key
# STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# --- AI/ML Services ---
# GOOGLE_AI_API_KEY=${GOOGLE_AI_API_KEY}
# OPENAI_API_KEY=${OPENAI_API_KEY}

# --- Analytics & Monitoring ---
# SENTRY_DSN=${SENTRY_DSN}
# SENTRY_ENVIRONMENT=production
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# ============================================
# 10. PRODUCTION CHECKLIST
# ============================================

# Before deploying to production:
# 1. Generate new JWT_SECRET: openssl rand -hex 32
# 2. Configure database with SSL (DB_SSLMODE=require)
# 3. Set up Redis for caching and sessions
# 4. Update CORS_ALLOWED_ORIGINS with your domain(s)
# 5. Configure SSL/TLS certificates
# 6. Set up monitoring and alerting (Sentry, Datadog, etc.)
# 7. Configure log aggregation (CloudWatch, Papertrail, etc.)
# 8. Set up backup strategies for database
# 9. Enable security headers (CSP, HSTS, X-Frame-Options)
# 10. Review and test rate limiting settings
